<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="text" placeholder="Enter github names" id="input-request" />
    <button type="button" id="btn-request">Search</button>

    <table class="table"></table>

    <script src="./node_modules/rxjs/dist/bundles/rxjs.umd.js"></script>
    <script>
      const url = 'https://api.github.com/users';
      const btnReq = document.querySelector('#btn-request');
      const inputReq = document.querySelector('#input-request').value;
      const table = document.querySelector('.table');

      fromEvent(btnReq, 'click').subscribe(
        fetch(url + inputReq)
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              throw new Error(
                `Сервер не отвечает. Ошибка номер ${response.status}`
              );
            }
          })
          .then((res) => {
            return `<tbody>
        <tr>
          <td>Name: </td>
          <td>${res.name}</td>
        </tr>
        <tr>
          <td>Age: </td>
          <td>${res.age}</td>
        </tr>
        <tr>
          <td>Email: </td>
          <td>${res.email}</td>
        </tr>
        <tr>
          <td>Company: </td>
          <td>${res.company}</td>
        </tr>
      </tbody>`;
          })
      );
    </script>
  </body>
</html>
